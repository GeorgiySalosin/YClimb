<Window x:Class="YClimb.Windows.ImageEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Route Image Editor" 
        Height="900" 
        Width="1200"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        MinHeight="700"
        MinWidth="1100">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Боковая панель инструментов -->
        <Border Grid.Column="0" 
                Width="80"
                Background="#252526"
                BorderBrush="#404040"
                BorderThickness="0,0,1,0">
            <StackPanel Orientation="Vertical"
                        VerticalAlignment="Top"
                        Margin="0,20,0,0">

                <!-- Инструменты -->
                <TextBlock Text="TOOLS"
                           FontSize="12"
                           FontFamily="Segoe UI"
                           Foreground="#CCCCCC"
                           Margin="10,32,10,4"
                           HorizontalAlignment="Center"/>

                <!-- Кнопка круга -->
                <Button x:Name="CircleToolButton"
                        Style="{StaticResource MenuButtonBlack}"
                        Height="50"
                        BorderThickness="0"
                        Margin="5,0,5,10"
                        Click="CircleToolButton_Click">
                    <StackPanel Orientation="Vertical"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                        <TextBlock Text="o"
                                   FontSize="24"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="CIRCLE"
                                   FontSize="11"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Кнопка линии -->
                <Button x:Name="LineToolButton"
                        Style="{StaticResource MenuButtonBlack}"
                        Height="50"
                        BorderThickness="0"
                        Margin="5,0,5,20"
                        Click="LineToolButton_Click">
                    <StackPanel Orientation="Vertical"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                        <TextBlock Text="─"
                                   FontSize="24"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="LINE"
                                   FontSize="11"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </Button>

                
                
                
                
                
                
                
                <!-- Цвета -->
                
                <TextBlock Text="COLOR"
                           FontSize="12"
                           FontFamily="Segoe UI"
                           Foreground="#CCCCCC"
                           Margin="10,32,10,4"
                           HorizontalAlignment="Center"/>


                
                <Button x:Name="RedColorButton"
                    Height="44"
                    Style="{StaticResource MenuButtonBlack}"
                    BorderThickness="0"
                    Margin="5,8,5,0"
                    Click="RedColorButton_Click">
                    <StackPanel Orientation="Vertical"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                        <Border Width="24" 
                            Height="24"
                            CornerRadius="12"
                            Background="Transparent"
                            BorderBrush="Red"
                            BorderThickness="2"/>
                        <TextBlock Text="START&#38;TOP"
                            FontSize="11"
                            HorizontalAlignment="Center"
                            Margin="0,2,0,0"/>
                    </StackPanel>
                </Button>
                
                
                <Button x:Name="YellowColorButton"
                        Style="{StaticResource MenuButtonBlack}"
                        Height="44"
                        BorderThickness="0"
                        Margin="5,8,5,8"
                        Click="YellowColorButton_Click">
                    <StackPanel Orientation="Vertical"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                        <Border Width="24" 
                                Height="24"
                                CornerRadius="12"
                                Background="Transparent"
                                BorderBrush="Yellow"
                                BorderThickness="2"/>
                        <TextBlock Text="OTHER"
                                   FontSize="11"
                                   HorizontalAlignment="Center"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </Button>

                
            </StackPanel>
        </Border>

        <!-- Основная область -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Основная область с вертикальным скроллом -->
            <ScrollViewer Grid.Row="0" 
                          VerticalScrollBarVisibility="Auto" 
                          HorizontalScrollBarVisibility="Disabled"
                          Background="#1E1E1E"
                          Padding="20">
                <Border Background="#2D2D30" 
                        BorderBrush="#404040" 
                        BorderThickness="1"
                        CornerRadius="4"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top">

                    <!-- Контейнер для изображения фиксированной ширины -->
                    <Grid x:Name="ImageContainer"
                          Width="860"
                          MaxWidth="860"
                          HorizontalAlignment="Center">

                        <!-- Базовое изображение -->
                        <Image x:Name="BaseImage" 
                               Stretch="Uniform"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Top"/>

                        <!-- Canvas для рисования - размеры будут установлены в коде -->
                        <Canvas x:Name="DrawingCanvas"
                                Background="Transparent"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Top"
                                MouseDown="DrawingCanvas_MouseDown"
                                MouseMove="DrawingCanvas_MouseMove"
                                MouseUp="DrawingCanvas_MouseUp">
                            <!-- Круги и линии добавляются динамически -->
                        </Canvas>
                    </Grid>
                </Border>
            </ScrollViewer>

            <!-- Нижняя панель управления -->
            <Border Grid.Row="1" 
                    Background="#252526" 
                    Padding="20"
                    BorderBrush="#404040"
                    BorderThickness="0,1,0,0">
                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center">

                    <TextBlock x:Name="StatusText"
                               Text="Click and drag to draw circles"
                               FontSize="14"
                               FontFamily="Segoe UI"
                               Foreground="#CCCCCC"
                               VerticalAlignment="Center"
                               Margin="0,0,30,0"/>

                    <Button x:Name="UndoButton"
                            Content="↶ Undo"
                            ToolTip="Remove last circle"
                            Style="{StaticResource ActionButton}"
                            Width="100" Height="35"
                            FontSize="13"
                            Foreground="#CCCCCC"
                            Background="#3E3E42"
                            Click="UndoButton_Click"
                            Margin="0,0,10,0"/>

                    <Button x:Name="ClearButton"
                            Content="🗑 Clear All"
                            ToolTip="Remove all circles"
                            Style="{StaticResource ActionButton}"
                            Width="120" Height="35"
                            FontSize="13"
                            Click="ClearButton_Click"
                            Margin="0,0,30,0"/>

                    <Button x:Name="ApplyButton" 
                            Content="💾 Save Image"
                            ToolTip="Save image with circles and lines"
                            Style="{StaticResource ActionButton}"
                            Width="140" Height="40"
                            FontSize="15" FontWeight="SemiBold"
                            Margin="0,0,30,0"
                            Click="ApplyButton_Click"/>

                    <Button x:Name="CancelButton" 
                            Content="✖ Cancel"
                            ToolTip="Discard changes"
                            Style="{StaticResource ActionButton}"
                            Width="120" Height="40"
                            FontSize="15"
                            Foreground="#CCCCCC"
                            Background="#3E3E42"
                            Click="CancelButton_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>